###############################################################################
# COMPILERS                                                                   #
###############################################################################

# definisce la macro CPPC
ifndef CPPC
	CPPC=g++
endif

###############################################################################
# BUILD                                                                       #
###############################################################################

SRC = $(APP).cpp ../mpui.cpp ../mpui_hub.cpp ../mpui_net.cpp
BIN = $(APP).o mpui.o mpui_hub.o mpui_net.o
EXE = $(APP)

default:$(EXE)

$(EXE): $(BIN)
	$(CPPC) $^ -lGL -lGLU -lglut -o $@ -O3 -fopenmp

$(BIN): $(SRC)
	$(CPPC) $^ -D __MPUI_HUB__ -c -O3 -fopenmp

###############################################################################
# EXECUTION                                                                   #
###############################################################################

run:
	./$(EXE)

run_mpui_source:
	./$(EXE) | nc -u localhost 4320

run_mpui_hub:
	nc -u -l 4320 | ./$(EXE)

###############################################################################
# CLEAN                                                                       #
###############################################################################

clean:
	rm -f *.o $(EXE)

wipe:
	rm -f *.o
